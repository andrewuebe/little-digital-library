{"ast":null,"code":"var _jsxFileName = \"/Users/andrewuebe/little-digital-library/pages/_app.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport App, { Container } from \"next/app\";\nimport Head from \"next/head\";\nimport Page from \"../comps/Page\";\nimport nextId from \"react-id-generator\";\nimport \"../static/style.css\";\n\nclass MyApp extends App {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"searchItems\", inputStr => {\n      this.setState({\n        searchField: inputStr\n      });\n    });\n\n    _defineProperty(this, \"changeItemInput\", (val, inputKey) => {\n      const myNewState = _objectSpread({}, this.state);\n\n      myNewState[inputKey] = val;\n      this.setState(myNewState);\n    });\n\n    _defineProperty(this, \"selectItem\", inputID => {\n      var selectedItem = this.state.items.filter(item => {\n        return item.id === inputID;\n      });\n      this.setState({\n        itemSelectedId: inputID\n      });\n      this.setState({\n        itemSelected: selectedItem\n      });\n      this.setState({\n        itemIsSelected: true\n      });\n    });\n\n    _defineProperty(this, \"validURL\", str => {\n      var pattern = new RegExp('^(https?:\\\\/\\\\/)?' + // protocol\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\n      '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\n\n      return !!pattern.test(str);\n    });\n\n    _defineProperty(this, \"isInputValid\", () => {\n      if (this.validURL(this.state.inputLink)) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n\n    _defineProperty(this, \"itemSubmit\", () => {\n      if (this.isInputValid) {\n        const myNewState = _objectSpread({}, this.state);\n\n        myNewState.itemIsShared = true;\n        myNewState.itemLinkLocked = false;\n        const newArray = this.state.items.slice();\n        const newItem = {\n          'userId': this.state.inputUserId,\n          'id': nextId(),\n          'title': this.state.inputTitle,\n          'author': this.state.inputAuthor,\n          'link': this.state.inputLink,\n          'type': this.state.inputType,\n          'note': this.state.inputNote\n        };\n        newArray.push(newItem);\n        myNewState.items = newArray;\n        this.setState(myNewState);\n      } else {}\n    });\n\n    _defineProperty(this, \"handleDelete\", itemId => {\n      console.log(\"got here!\" + itemId);\n      const items = this.state.items.filter(item => item.id !== itemId);\n      this.setState({\n        items: items\n      });\n    });\n\n    _defineProperty(this, \"returnToLibrary\", () => {\n      const selectedItemId = this.state.itemSelectedId;\n      this.handleDelete(selectedItemId);\n      const obj = {};\n      this.setState({\n        itemSelected: obj\n      });\n      this.setState({\n        itemIsShared: false\n      });\n      this.setState({\n        itemIsSelected: false\n      });\n    });\n\n    this.state = {\n      items: [],\n      searchField: \"\",\n      itemIsSelected: false,\n      itemSelected: {},\n      itemSelectedId: 9999,\n      itemLinkLocked: true,\n      itemIsShared: false,\n      inputAuthor: \"\",\n      inputUserId: 0,\n      inputId: 0,\n      inputTitle: \"\",\n      inputLink: \"\",\n      inputType: \"\",\n      inputNote: \"\"\n    };\n  }\n\n  componentDidMount() {\n    // fetch items from endpoint\n    fetch(\"https://my-json-server.typicode.com/andrewuebe/test-db/posts\").then(response => response.json()).then(posts => this.setState({\n      items: posts\n    }));\n  }\n\n  render() {\n    // filter item list by searchField\n    const {\n      Component\n    } = this.props;\n    const {\n      items,\n      searchField\n    } = this.state;\n    const filteredItems = items.filter(item => item.title.toLowerCase().includes(searchField.toLowerCase()));\n    return __jsx(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, __jsx(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Little Digital Library\"), __jsx(\"meta\", {\n      name: \"viewport\",\n      content: \"initial-scale=1.0, width=device-width\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })), __jsx(Page, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, __jsx(Component, {\n      items: filteredItems,\n      searchItems: this.searchItems,\n      itemIsSelected: this.state.itemIsSelected,\n      itemLinkLocked: this.state.itemLinkLocked,\n      selectItem: this.selectItem,\n      itemSelected: this.state.itemSelected,\n      changeItemInput: this.changeItemInput,\n      itemSubmit: this.itemSubmit,\n      itemIsShared: this.state.itemIsShared,\n      returnToLibrary: this.returnToLibrary,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default MyApp;","map":{"version":3,"sources":["/Users/andrewuebe/little-digital-library/pages/_app.js"],"names":["App","Container","Head","Page","nextId","MyApp","constructor","inputStr","setState","searchField","val","inputKey","myNewState","state","inputID","selectedItem","items","filter","item","id","itemSelectedId","itemSelected","itemIsSelected","str","pattern","RegExp","test","validURL","inputLink","isInputValid","itemIsShared","itemLinkLocked","newArray","slice","newItem","inputUserId","inputTitle","inputAuthor","inputType","inputNote","push","itemId","console","log","selectedItemId","handleDelete","obj","inputId","componentDidMount","fetch","then","response","json","posts","render","Component","props","filteredItems","title","toLowerCase","includes","searchItems","selectItem","changeItemInput","itemSubmit","returnToLibrary"],"mappings":"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","sourcesContent":["import App, { Container } from \"next/app\";\nimport Head from \"next/head\";\nimport Page from \"../comps/Page\";\nimport nextId from \"react-id-generator\"\nimport \"../static/style.css\";\n\nclass MyApp extends App {\n  constructor() {\n    super();\n\n    this.state = {\n      items: [],\n      searchField: \"\",\n      itemIsSelected: false,\n      itemSelected: {},\n      itemSelectedId: 9999,\n      itemLinkLocked: true,\n      itemIsShared: false,\n      inputAuthor: \"\",\n      inputUserId: 0,\n      inputId: 0,\n      inputTitle: \"\",\n      inputLink: \"\",\n      inputType: \"\",\n      inputNote: \"\"\n    };\n  }\n\n  componentDidMount() {\n    // fetch items from endpoint\n    fetch(\"https://my-json-server.typicode.com/andrewuebe/test-db/posts\")\n      .then(response => response.json())\n      .then(posts => this.setState({ items: posts }));\n  }\n\n  searchItems = inputStr => {\n    this.setState({ searchField: inputStr });\n  };\n\n  changeItemInput = (val, inputKey) => {\n    const myNewState = { ...this.state }\n    myNewState[inputKey] = val;\n    this.setState(myNewState);\n  };\n\n  selectItem = inputID => {\n    var selectedItem = this.state.items.filter(item => {\n      return item.id === inputID;\n    });\n    this.setState({itemSelectedId: inputID});\n    this.setState({ itemSelected: selectedItem });\n    this.setState({ itemIsSelected: true });\n  };\n\n  validURL = str => {\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n      '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\n    return !!pattern.test(str);\n  }\n\n  isInputValid = () => {\n    if(this.validURL(this.state.inputLink)){\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  itemSubmit = () => {\n    if(this.isInputValid){\n      const myNewState = { ...this.state }\n    myNewState.itemIsShared = true;\n    myNewState.itemLinkLocked = false;\n    const newArray = this.state.items.slice();\n    const newItem = {\n      'userId': this.state.inputUserId,\n      'id': nextId(),\n      'title': this.state.inputTitle,\n      'author': this.state.inputAuthor,\n      'link': this.state.inputLink,\n      'type': this.state.inputType,\n      'note': this.state.inputNote\n    };\n    newArray.push(newItem);\n    myNewState.items = newArray;\n    this.setState(myNewState);\n    }\n    else {\n\n    }\n  }\n\n  handleDelete = (itemId) => {\n    console.log(\"got here!\" + itemId);\n    const items = this.state.items.filter(item => item.id !== itemId);\n    this.setState({items: items});\n  }\n\n  returnToLibrary = () => {\n    const selectedItemId = this.state.itemSelectedId;\n    this.handleDelete(selectedItemId);\n    const obj = {};\n    this.setState({ itemSelected: obj });\n    this.setState({ itemIsShared: false });\n    this.setState({ itemIsSelected: false });\n  }\n\n  render() {\n\n    // filter item list by searchField\n    const { Component } = this.props;\n    const { items, searchField } = this.state;\n    const filteredItems = items.filter(item =>\n      item.title.toLowerCase().includes(searchField.toLowerCase())\n    );\n\n\n    return (\n      <Container>\n        <Head>\n          <title>Little Digital Library</title>\n          <meta\n            name=\"viewport\"\n            content=\"initial-scale=1.0, width=device-width\"\n          />\n        </Head>\n        <Page>\n          <Component\n            items={filteredItems}\n            searchItems={this.searchItems}\n            itemIsSelected={this.state.itemIsSelected}\n            itemLinkLocked={this.state.itemLinkLocked}\n            selectItem={this.selectItem}\n            itemSelected={this.state.itemSelected}\n            changeItemInput={this.changeItemInput}\n            itemSubmit={this.itemSubmit}\n            itemIsShared={this.state.itemIsShared}\n            returnToLibrary={this.returnToLibrary}\n          />\n        </Page>\n      </Container>\n    );\n  }\n}\n\nexport default MyApp;\n"]},"metadata":{},"sourceType":"module"}